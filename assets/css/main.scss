---
---

/*
 * This file controls what is imported from /_sass
 *
 * Note that the files are processed in the order they are imported, so they are partly
   sorted by the dependencies. Also, the first two lines of the file are required by Jekyll.
 */

@import
    "vendor/breakpoint/breakpoint",

    "themes",
    "theme/{{ site.site_theme | default: 'default' | append: '_light' }}",
    "theme/{{ site.site_theme | default: 'default' | append: '_dark' }}",

    "include/mixins",
    "vendor/susy/susy",

    "layout/reset",
    "layout/base",

    "include/utilities",
    "layout/tables",
    "layout/buttons",
    "layout/notices",
    "layout/masthead",
    "layout/navigation",
    "layout/footer",
    "syntax",

    "layout/forms",

    "layout/page",
    "layout/archive",
    "layout/sidebar",
    "layout/json_cv",

    "vendor/font-awesome/fontawesome",
    "vendor/font-awesome/solid",
    "vendor/font-awesome/brands";

/* ============================================================
   Overrides: layout fixes
   - hide menu toggle
   - keep nav/sidebar visible
   - add sidebar padding
   - center/size avatar
   ============================================================ */

/* Hide common toggle triggers */
.nav-trigger,
.sidebar-toggle,
.greedy-nav__toggle,
#sidebar-checkbox,
label[for="nav-trigger"] {
  display: none !important;
}

/* Ensure nav/sidebar remain visible even if a toggle class is expected */
.site-nav,
.sidebar,
.masthead__menu {
  transform: none !important;
  opacity: 1 !important;
  visibility: visible !important;
}

/* Avoid layout shift if the theme reserves space for the toggle */
.masthead,
.masthead__menu,
.site-nav {
  transition: none !important;
}

/* Keep sidebar fixed/visible on desktop widths (if theme uses off-canvas) */
@media (min-width: 992px) {
  .sidebar {
    left: 0 !important;
  }
}

/* ---------- Sidebar spacing ---------- */
.sidebar,
.site-sidebar,
.page__sidebar,
.sidebar__inner {
  padding-left: 24px !important;
  padding-right: 24px !important;
  box-sizing: border-box;
}

/* Tighter padding on small screens */
@media (max-width: 480px) {
  .sidebar,
  .site-sidebar,
  .page__sidebar,
  .sidebar__inner {
    padding-left: 16px !important;
    padding-right: 16px !important;
  }
}

/* ---------- Author avatar & block ---------- */
.author__avatar {
  display: block !important;
  text-align: center;
  margin: 0 auto 16px !important;     /* center + spacing below */
}

.author__avatar img,
.author__avatar .u-photo {
  display: block !important;
  width: 180px;                        /* fixed nice size */
  height: 180px;
  max-width: 100%;
  object-fit: cover;                   /* fill circle nicely */
  border-radius: 50%;
  border: 4px solid #eee;              /* subtle ring */
  margin: 0 auto;                      /* center image inside */
}

@media (max-width: 480px) {
  .author__avatar img,
  .author__avatar .u-photo {
    width: 140px;
    height: 140px;
  }
}

/* If theme collapses author block text, keep readable spacing */
.author__content,
.author__name,
.author__bio {
  margin-left: 0 !important;
  margin-right: 0 !important;
}

/* Make sure icon rows line up nicely */
.author__urls,
.author__urls li,
.author__urls a {
  line-height: 1.4;
}

/* ==== Avatar container: hard-fixed circle ==== */
.author__avatar,
.sidebar .author__avatar,
.page__sidebar .author__avatar {
  display: block !important;
  width: 180px !important;
  height: 180px !important;
  min-width: 180px !important;
  min-height: 180px !important;
  max-width: 180px !important;
  max-height: 180px !important;

  border-radius: 50% !important;  /* the container itself is a circle */
  overflow: hidden !important;     /* hide overflow so image is clipped to circle */
  margin: 0 auto 16px !important;  /* center in sidebar */
  flex: 0 0 auto !important;       /* prevent flexbox from squashing it */
  aspect-ratio: 1 / 1 !important;  /* safety net */
}

/* Image fills the circle without distortion */
.author__avatar img,
.author__avatar .u-photo {
  display: block !important;
  width: 100% !important;
  height: 100% !important;
  max-width: none !important;      /* defeat global img rules */
  object-fit: cover !important;     /* fill circle nicely */
  border-radius: 50% !important;    /* keep edges round */
  margin: 0 !important;
}

/* Optional: smaller but still circular on very small screens */
@media (max-width: 480px) {
  .author__avatar,
  .sidebar .author__avatar,
  .page__sidebar .author__avatar {
    width: 140px !important;
    height: 140px !important;
    min-width: 140px !important;
    min-height: 140px !important;
    max-width: 140px !important;
    max-height: 140px !important;
  }
}

